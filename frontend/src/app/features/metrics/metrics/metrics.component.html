<div *ngIf="qa" class="wrapper">
  <!-- Body -->
  <section class="body">
    <!-- Components -->
    <div class="components scroll-y">
      <ng-container *ngFor="let component of components | keyvalue">
        <app-accordion>
          <div title>{{ component.key }}</div>
          <div body class="scroll-y component">
            <!-- Tests -->
            <ng-container *ngFor="let test of component.value">
              <!-- Test results -->
              <ng-container
                *ngFor="let testResult of getTestResults(component.key, test)"
              >
                <app-accordion *ngIf="isFiltered(testResult)">
                  <div title class="test-result">
                    <span>{{ testResult.message }}</span>
                  </div>
                  <div extra class="attributes">
                    <div
                      class="circle"
                      *ngFor="let tag of testResult.attributes"
                      [ngStyle]="{ 'background-color': attributes[tag].color }"
                      [ngbTooltip]="tag"
                    ></div>
                  </div>
                  <span body>{{ testResult.details }}</span>
                </app-accordion>
              </ng-container>
            </ng-container>
          </div>
        </app-accordion>
      </ng-container>
    </div>
    <!-- Filters -->
    <div class="filters">
      <div>Shown Tests</div>
      <app-circle-toggle
        *ngFor="let attribute of attributes | keyvalue"
        [color]="attribute.value.color"
        [toggle]="attribute.value.shown"
        (click)="attribute.value.shown = !attribute.value.shown"
        >{{ attribute.key }}</app-circle-toggle
      >
    </div>
  </section>
</div>
